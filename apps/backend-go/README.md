# Go Backend –¥–ª—è AviTost

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ

–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π Go backend –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å:

- **Avito API** - –ø–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **Billing System** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º –∏ –ø–ª–∞—Ç–µ–∂–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **HTTP API** - RESTful API —Å JSON responses

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
apps/backend-go/
‚îú‚îÄ‚îÄ main.go              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/            # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ avito/          # –ö–ª–∏–µ–Ω—Ç –¥–ª—è Avito API
‚îÇ   ‚îú‚îÄ‚îÄ billing/        # –°–µ—Ä–≤–∏—Å –±–∏–ª–ª–∏–Ω–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ config/         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ http/           # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ —Ä–æ—É—Ç–∏–Ω–≥
‚îú‚îÄ‚îÄ go.mod              # Go –º–æ–¥—É–ª—å –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ go.sum              # –•–µ—à–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îî‚îÄ‚îÄ README.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21+
- PostgreSQL (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd apps/backend-go
go mod tidy

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
go run main.go

# –ò–ª–∏ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
make backend-go-dev
```

## üåê –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# Go Backend
GO_PORT=8001
GO_HOST=localhost
GIN_MODE=debug

# Database (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è)
DATABASE_URL=postgres://user:password@localhost:5432/avitost

# Avito API (–¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
AVITO_API_URL=https://api.avito.ru
```

## üì° API Endpoints

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ `http://localhost:8001`

### Health Check

- `GET /health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### API v1

- `GET /api/v1/status` - –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- `GET /api/v1/avito/categories` - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ Avito
- `GET /api/v1/avito/search?query=...` - –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `GET /api/v1/billing/users/:id/balance` - –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/v1/billing/users/:id/payments` - –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# Health check
curl http://localhost:8001/health

# –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
curl http://localhost:8001/api/v1/status

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
curl http://localhost:8001/api/v1/avito/categories

# –ü–æ–∏—Å–∫ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
curl "http://localhost:8001/api/v1/avito/search?query=iPhone"

# –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl http://localhost:8001/api/v1/billing/users/123/balance

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST http://localhost:8001/api/v1/billing/users/123/payments \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000, "description": "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞"}'
```

## ÔøΩ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ endpoint

1. –°–æ–∑–¥–∞–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `internal/http/`
2. –î–æ–±–∞–≤—å—Ç–µ —Ä–æ—É—Ç –≤ `main.go`
3. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–æ–≤

- `internal/avito/` - –†–∞–±–æ—Ç–∞ —Å Avito API
- `internal/billing/` - –°–∏—Å—Ç–µ–º–∞ –±–∏–ª–ª–∏–Ω–≥–∞
- `internal/config/` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `internal/http/` - HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏ middleware

## üöÄ –î–µ–ø–ª–æ–π

```bash
# –°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞
go build -o avitost-backend main.go

# –ó–∞–ø—É—Å–∫
./avitost-backend
```
